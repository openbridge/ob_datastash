input {
  file {
     path => "/tmp/*.csv"
     start_position => "beginning"
     sincedb_path => "/dev/null"
  }
}

filter {
  csv {
     separator => ","
     remove_field => [ "message", "host", "@timestamp", "@version", "path" ]
     autodetect_column_names => "true"
     autogenerate_column_names => "true"
  }
}

output {
  http {
      url => "https://myapi.foo-api.us-east-1.amazonaws.com/dev/events/teststash?token=774f77b389154fd2ae7cb5131201777&sign=ujguuuljNjBkFGHyNTNmZTIxYjEzMWE5MjgyNzM1ODQ="
      http_method => "post"
      format => "json"
      pool_max => "10"
      pool_max_per_route => "5"
  }
}
